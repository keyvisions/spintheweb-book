% Formatting definitions for the Spin the Web Book
% This file contains all formatting and style definitions

% Hyperlink setup
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    citecolor=green,
    pdftitle={Spin the Web},
    pdfauthor={Giancarlo Trevisan (\organization)},
    pdfsubject={Enterprise Web Portal Development},
    pdfkeywords={WBDL, Web Spinner, Portal, Enterprise Software, KeyVisions},
    bookmarks=true,
    bookmarksopen=true,
    bookmarksopenlevel=2
}

% Page headers and footers
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[LO]{\nouppercase{\rightmark}}
\fancyhead[RE]{\nouppercase{\leftmark}}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}

% Fix header height warning
\setlength{\headheight}{14pt}

% Chapter and section formatting
\usepackage{titlesec}
\titleformat{\chapter}[display]
  {\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{50pt}{40pt}

% Line spacing
\onehalfspacing

% Paragraph formatting
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.5em}

% List formatting
\setlist{nosep}
\setlist[itemize]{leftmargin=1.5em}
\setlist[enumerate]{leftmargin=1.5em}

% Code listing colors and styles
\definecolor{codebackground}{RGB}{248,248,248}
\definecolor{codeborder}{RGB}{221,221,221}
\definecolor{commentcolor}{RGB}{106,153,85}
\definecolor{keywordcolor}{RGB}{86,156,214}
\definecolor{stringcolor}{RGB}{206,145,120}

% Listings configuration
% Enable UTF-8 characters commonly used in examples inside listings
\lstset{
        inputencoding=utf8,
        literate=
            {‹}{{\guilsinglleft}}1 {›}{{\guilsinglright}}1 % single guillemets
            {«}{{\guillemotleft}}1 {»}{{\guillemotright}}1 % double guillemets
            {“}{{\textquotedblleft}}1 {”}{{\textquotedblright}}1 % curly double quotes
            {‘}{{\textquoteleft}}1 {’}{{\textquoteright}}1 % curly single quotes/apostrophe
            {–}{{\textendash}}1 {—}{{\textemdash}}1 % en/em dashes
            {…}{{\ldots}}1 % ellipsis
            {°}{{\textdegree}}1 % degree symbol
            {€}{{\texteuro}}1 % euro sign
            {™}{{\texttrademark}}1 {®}{{\textregistered}}1 {©}{{\textcopyright}}1 % symbols
            {•}{{\textbullet}}1
}

\lstset{
    backgroundcolor=\color{codebackground},
    commentstyle=\color{commentcolor},
    keywordstyle=\color{keywordcolor},
    numberstyle=\tiny\color{gray},
    stringstyle=\color{stringcolor},
    basicstyle=\ttfamily\scriptsize, % Use scriptsize to fit wider code
    breakatwhitespace=true,          % Allow breaking at whitespace
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2,
    frame=single,
    frameround=tttt,
    rulecolor=\color{codeborder},
    inputencoding=utf8,
    literate=
        {‹}{{\guilsinglleft}}1 {›}{{\guilsinglright}}1 % single guillemets
        {«}{{\guillemotleft}}1 {»}{{\guillemotright}}1 % double guillemets
        {“}{{\textquotedblleft}}1 {”}{{\textquotedblright}}1 % curly double quotes
        {‘}{{\textquoteleft}}1 {’}{{\textquoteright}}1 % curly single quotes/apostrophe
        {–}{{\textendash}}1 {—}{{\textemdash}}1 % en/em dashes
        {…}{{\ldots}}1 % ellipsis
        {°}{{\textdegree}}1 % degree symbol
        {€}{{\texteuro}}1 % euro sign
        {™}{{\texttrademark}}1 {®}{{\textregistered}}1 {©}{{\textcopyright}}1 % symbols
        {•}{{\textbullet}}1
}

\lstdefinestyle{xmlstyle}{
    language=XML,
}

\lstdefinestyle{jsontstyle}{
    language=JavaScript,
}

% Custom boxes for examples, notes, warnings
\newtcolorbox{examplebox}[1][]{
    colback=blue!5!white,
    colframe=blue!75!black,
    title=Example,
    #1
}

\newtcolorbox{notebox}[1][]{
    colback=green!5!white,
    colframe=green!75!black,
    title=Note,
    #1
}

\newtcolorbox{warningbox}[1][]{
    colback=red!5!white,
    colframe=red!75!black,
    title=Warning,
    #1
}

\newtcolorbox{tipbox}[1][]{
    colback=orange!5!white,
    colframe=orange!75!black,
    title=Tip,
    #1
}

% Figure and table captions
\usepackage{caption}
\captionsetup{
    font=small,
    labelfont=bf,
    format=hang,
    indention=0cm,
    margin=1cm
}

% Glossary style
\setglossarystyle{altlist}
