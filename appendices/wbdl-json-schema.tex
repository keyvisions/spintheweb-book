% Appendix: WBDL JSON Schema Reference

\chapter{WBDL JSON Schema Reference}
\label{app:wbdl-json-schema}

This appendix collects the formal JSON Schema definitions for the main WBDL element types used in Spin the Web. These schemas provide the canonical structure for sites, areas, pages, and content elements.

\section{STWElement Base}
\begin{lstlisting}[language=JSON,caption={STWElement Base Schema Definition}]
{
  "$id": "https://spintheweb.org/schemas/STWElement.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "STWElement",
  "description": "The base element for all WBDL objects.",
  "type": "object",
  "properties": {
    "_id": { "type": "string", "format": "uuid" },
    "type": { "enum": ["Site", "Area", "Page", "Content"] },
    "name": { "$ref": "STWLocalized.json" },
    "slug": { "$ref": "STWLocalized.json" },
    "keywords": { "$ref": "STWLocalized.json" },
    "description": { "$ref": "STWLocalized.json" },
    "visibility": { "$ref": "STWVisibility.json" },
    "children": {
      "type": "array",
      "items": { "$ref": "#" }
    }
  },
  "required": ["_id", "type", "name", "slug"]
}
\end{lstlisting}

\section{STWSite}
\begin{lstlisting}[language=JSON,caption={STWSite Schema Definition}]
{
  "$id": "https://spintheweb.org/schemas/STWSite.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "STWSite",
  "allOf": [{ "$ref": "STWElement.json" }],
  "properties": {
    "type": { "const": "Site" },
    "mainpage": { "type": "string", "format": "uuid" },
    "langs": {
      "type": "array",
      "items": { "type": "string" }
    },
    "datasources": {
      "type": "array",
      "items": { "type": "object" }
    },
    "children": {
      "type": "array",
      "items": { "$ref": "STWArea.json" }
    }
  },
  "required": ["mainpage"]
}
\end{lstlisting}

\section{STWArea}
\begin{lstlisting}[language=JSON,caption={STWArea Schema Definition}]
{
  "$id": "https://spintheweb.org/schemas/STWArea.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "STWArea",
  "allOf": [{ "$ref": "STWElement.json" }],
  "properties": {
    "type": { "const": "Area" },
    "mainpage": { "type": "string", "format": "uuid" }
  },
  "required": ["mainpage"]
}
\end{lstlisting}

\section{STWPage}
\begin{lstlisting}[language=JSON,caption={STWPage Schema Definition}]
{
  "$id": "https://spintheweb.org/schemas/STWPage.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "STWPage",
  "allOf": [{ "$ref": "STWElement.json" }],
  "properties": {
    "type": { "const": "Page" },
    "children": {
      "type": "array",
      "items": { "$ref": "STWContent.json" }
    }
  },
  "required": ["children"]
}
\end{lstlisting}

\section{STWContent}
\begin{lstlisting}[language=JSON,caption={STWContent Schema Definition}]
{
  "$id": "https://spintheweb.org/schemas/STWContent.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "STWContent",
  "allOf": [{ "$ref": "STWElement.json" }],
  "properties": {
    "type": { "const": "Content" },
    "subtype": { "type": "string" },
    "cssClass": { "type": "string" },
    "section": { "type": "string" },
    "sequence": { "type": "integer" },
    "dsn": { "type": "string" },
    "command": { "type": "string" },
    "params": { "type": "string" },
    "layout": { "$ref": "STWLayout.json" }
  },
  "required": ["layout"]
}
\end{lstlisting}

\section{STWContentWithOptions}
\begin{lstlisting}[language=JSON,caption={STWContentWithOptions Schema Definition}]
{
  "$id": "https://spintheweb.org/schemas/STWContentWithOptions.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "STWContentWithOptions",
  "allOf": [{ "$ref": "STWElement.json" }],
  "properties": {
    "type": { "const": "Content" },
    "subtype": { "type": "string" },
    "options": {
      "type": "array",
      "items": { "type": "string", "format": "uuid" }
    },
    "layout": { "$ref": "STWLayout.json" }
  },
  "required": ["options"]
}
\end{lstlisting}
