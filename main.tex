% Main document file for the Spin the Web Book
% This file orchestrates the entire book structure

\documentclass[11pt,openright,twoside,a4paper]{book}

% Load all packages and formatting
\input{preamble/packages}
\input{preamble/commands}
\input{preamble/formatting}
\input{preamble/glossary}

% Document metadata
\title{Spin the Web}
\subtitle{Weaving Web Portals}
\author{Giancarlo Trevisan}
\date{\today}

% Generate index
\makeindex
\makeglossaries

\begin{document}

%% FRONT MATTER %%
\frontmatter
\input{frontmatter/titlepage}
\input{frontmatter/license}
\input{frontmatter/dedication}
\input{frontmatter/abstract}
\input{frontmatter/preface}

% Table of contents (chapters only)
\setcounter{tocdepth}{0}
\tableofcontents

%% MAIN MATTER %%
\mainmatter

% Part I: The Foundations
\part{The Foundations}
\input{part1-foundations/intro}
\input{part1-foundations/genesis}
\input{part1-foundations/introduction}
\input{part1-foundations/virtualized}
\input{part1-foundations/architecture}

% Part II: The Framework
\part{The Framework}
\input{part2-framework/intro}
\input{part2-framework/wbdl}
\input{part2-framework/wbpl}
\input{part2-framework/wbll}
\input{part2-framework/webbaselets}
\input{part2-framework/web-spinner}
\input{part2-framework/studio}
\input{part2-framework/technology}

% Part III: The Portal
\part{The Portal}
\input{part3-implementation/intro}
\input{part3-implementation/contents}
\input{part3-implementation/visuals}

% Part IV: The Roadmap
\part{The Roadmap}
\input{part4-roadmap/intro}
\input{part4-roadmap/directions}

%% APPENDICES %%
\part*{Appendices}
\addcontentsline{toc}{part}{Appendices}
\appendix
\input{appendices/wbdl-json-schema}
\input{appendices/wbll-tokens}
\input{appendices/webbaselets}

%% BACK MATTER %%
\backmatter
% Hide bibliography from PDF outline (bookmarks) while keeping it out of TOC
\begingroup
	\bookmarksetup{startatroot,depth=-2}
	\phantomsection
	\nocite{*}
	\bibliographystyle{plain}
	\bibliography{bibliography/references}
\endgroup
% Ensure glossary is populated even if some entries aren't referenced yet
\glsaddall
\printglossary
\printindex

\end{document}
